{"version":3,"sources":["js/components/news-service.js","js/components/articles.js","js/components/load-more-btn.js","index.js"],"names":["API_KEY","BASE_URL","options","headers","Authorization","NewsApiService","constructor","searchQuery","page","fetchArticles","console","log","url","fetch","then","response","json","articles","incrementPage","resetPage","query","newQuery","renderUserList","map","urlToImage","author","description","title","join","LoadMoreBtn","selector","hidden","refs","getRefs","hide","button","document","querySelector","label","spinner","enable","disabled","textContent","classList","add","disable","remove","show","searchForm","articlesContainer","loadMoreBtn","newsApiService","onSearch","e","preventDefault","currentTarget","elements","value","alert","clearArticlesContainer","appendArticlesMarkup","insertAdjacentHTML","innerHTML","addEventListener"],"mappings":"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","file":"src.82963a27.js","sourceRoot":"../src","sourcesContent":["const API_KEY = '4330ebfabc654a6992c2aa792f3173a3';\nconst BASE_URL = 'http://newsapi.org/v2/'\nconst options = {\n    headers: {\n        Authorization: API_KEY,\n    }\n}\n\nexport default class NewsApiService{\n    constructor() {\n        this.searchQuery = '';\n        this.page = 1;\n    }\n\n    fetchArticles() {\n        console.log('До запроса ', this)\n        \n\n        const url = `${BASE_URL}everything?q=${this.searchQuery}&language=en&pageSize=5&page=${this.page}`;\n\n        return fetch(url, options)\n            .then(response => response.json())\n            .then(({articles}) => {\n                this.incrementPage();\n                console.log('После запроса, если ок ', this);\n                return articles\n            })\n    }\n    incrementPage() {\n        this.page += 1;\n    }\n\n    resetPage() {\n        this.page = 1;\n    }\n\n    get query() {\n        return this.searchQuery;\n    }\n\n    set query(newQuery) {\n        this.searchQuery = newQuery\n    }\n}","// {{#each this}}\n//   <li>\n//     <a href=\"{{url}}\" target=\"_blank\" rel=\"noopener noreferrer\">\n//       <article>\n//         <img src=\"{{urlToImage}}\" alt=\"\" width=\"480\">\n//         <h2>{{title}}</h2>\n//         <p>Posted by: {{author}}</p>\n//         <p>{{description}}</p>\n//       </article>\n//     </a>\n//   </li>\n// {{/each}}\n\n\nexport function renderUserList(articles) {\n  return articles.map(({url, urlToImage, author, description, title}) => {\n        return `<li>\n            <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n                <article>\n                    <img src=\"${urlToImage}\" alt=\"\" width=\"480\">\n                    <h2>${title}</h2>\n                    <p>Posted by: ${author}</p>\n                    <p>${description}</p>\n                </article>\n            </a>\n        </li>`;\n    })\n      .join(\"\");\n}","export default class LoadMoreBtn {\n  constructor({ selector, hidden = false }) {\n    this.refs = this.getRefs(selector);\n\n    hidden && this.hide();\n  }\n\n  getRefs(selector) {\n    const refs = {};\n    refs.button = document.querySelector(selector);\n    refs.label = refs.button.querySelector('.label');\n    refs.spinner = refs.button.querySelector('.spinner');\n\n    return refs;\n  }\n\n  enable() {\n    this.refs.button.disabled = false;\n    this.refs.label.textContent = 'Показать ещё';\n    this.refs.spinner.classList.add('is-hidden');\n  }\n\n  disable() {\n    this.refs.button.disabled = true;\n    this.refs.label.textContent = 'Загружаем...';\n    this.refs.spinner.classList.remove('is-hidden');\n  }\n\n  show() {\n    this.refs.button.classList.remove('is-hidden');\n  }\n\n  hide() {\n    this.refs.button.classList.add('is-hidden');\n  }\n}","// import './js/users'\n\n// import './js/crud';\n// import './js/async-crud';\n\n// import './sass/main.scss';\n// import './js/r-get'\n// import './js/c-post';\n// import './js/u - patch';\n// import './js/d-delete';\n\n// console.log('Hello World');\n\n/* \n    https://jsonplaceholder.typicode.com - це ендпоінт, базовий URL, точка входу в API.\n    /users - ресурс, до якого ми звертаємося.\n */\n\n\n// fetch(\"https://jsonplaceholder.typicode.com/users\")\n//   .then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     return response.json();\n//   })\n//   .then(data => {\n//     // Data handling\n//       console.log(data)\n//   })\n//   .catch(error => {\n//     // Error handling\n//       console.log(error)\n//   });\n\n\n// Під час складання рядків параметрів, створюється екземпляр класу URLSearchParams та ініціалізується об'єктом. Результатом буде спеціальний об'єкт (ітератор) з методами, який у рядковому перетворенні повертає результат виклику методу toString() - своє рядкове відображення.\n\n// const searchParams = new URLSearchParams({\n//   _limit: 5,\n//   _sort: \"name\",\n// });\n\n// console.log(searchParams.toString())\n\n\n\n/*\n * - Пагинация\n *   - страница и кол-во на странице\n * - Загружаем статьи при сабмите формы\n * - Загружаем статьи при нажатии на кнопку «Загрузить еще»\n * - Обновляем страницу в параметрах запроса\n * - Рисуем статьи\n * - Сброс значения при поиске по новому критерию\n *\n * https://newsapi.org/\n * 4330ebfabc654a6992c2aa792f3173a3\n * http://newsapi.org/v2/everything?q=cat&language=en&pageSize=5&page=1\n */\n\nimport './sass/common.scss';\nimport NewsApiService from './js/components/news-service'\nimport { renderUserList } from \"./js/components/articles\";\nimport LoadMoreBtn from './js/components/load-more-btn'\n\nconst refs = {\n    searchForm: document.querySelector('.js-search-form'),\n    articlesContainer: document.querySelector('.js-articles-container'),\n    // loadMoreBtn: document.querySelector('[data-action=\"load-more\"]'),\n};\n\nconst loadMoreBtn = new LoadMoreBtn({\n    selector: '[data-action=\"load-more\"]',\n    hidden: true,\n});\nconst newsApiService = new NewsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nloadMoreBtn.refs.button.addEventListener('click', fetchArticles);\n\nconsole.log(newsApiService);\nconsole.log(loadMoreBtn);\n\n\nfunction onSearch(e) {\n    e.preventDefault();\n\n    \n    newsApiService.query = e.currentTarget.elements.searchQuery.value;\n\n    if (newsApiService.query === '') {\n        return alert('Введи что то нормальное!');\n    }\n\n    loadMoreBtn.show();\n    newsApiService.resetPage();\n    \n    clearArticlesContainer();\n    fetchArticles();\n}\n\n\nfunction fetchArticles() {\n    loadMoreBtn.disable();\n    newsApiService.fetchArticles().then(articles => {\n        appendArticlesMarkup(articles);\n        loadMoreBtn.enable();\n    })\n}\n\n\nfunction appendArticlesMarkup(articles) {\n    console.log('appendArticlesMarkup: ', articles);\n  refs.articlesContainer.insertAdjacentHTML('beforeend', renderUserList(articles));\n}\n\nfunction clearArticlesContainer() {\n    refs.articlesContainer.innerHTML = '';\n}\n"]}